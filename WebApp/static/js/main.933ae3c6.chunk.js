(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,a){e.exports=a(208)},158:function(e,t,a){},162:function(e,t,a){},208:function(e,t,a){"use strict";a.r(t);a(123),a(147),a(149);var n=a(0),l=a.n(n),i=a(15),r=a.n(i),o=(a(158),a(66)),c=a.n(o),s=a(105),u=a(106),d=a(107),h=a(108),m=a(120),p=a(109),E=a(121),v=a(12),g=(a(162),a(213)),b=a(214),y=a(218),f=a(217),k=a(216),C=a(215),S=a(102),j=a(113),O=a(210),w=a(211),I=a(212),L=a(209),T=["\u20ac","\xa3","$"],A=function(e){function t(e,a){var n;Object(d.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e,a))).handleStateChange=n.handleStateChange.bind(Object(v.a)(Object(v.a)(n))),n.calculate=n.calculate.bind(Object(v.a)(Object(v.a)(n))),n.handleClearClick=n.handleClearClick.bind(Object(v.a)(Object(v.a)(n))),n.handleApiEndpointEdit=n.handleApiEndpointEdit.bind(Object(v.a)(Object(v.a)(n)));var l=localStorage.getItem("loanCalculatorApiEndpoint");return n.state={principal:"",loanTerm:"",loanRate:"",currency:T[1],isLoading:!1,apiEndpointEditMode:!1,apiEndpoint:l||"",tableData:[]},n}return Object(E.a)(t,e),Object(h.a)(t,[{key:"handleStateChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(u.a)({},a,n))}},{key:"handleApiEndpointEdit",value:function(e){this.state.apiEndpointEditMode&&localStorage.setItem("loanCalculatorApiEndpoint",this.state.apiEndpoint),this.setState(function(e){return{apiEndpointEditMode:!e.apiEndpointEditMode}})}},{key:"validatePrincipal",value:function(e){return this.validatePositiveInteger(e)}},{key:"validateLoanTerm",value:function(e){return this.validatePositiveInteger(e)}},{key:"validateLoanRate",value:function(e){return null}},{key:"validatePositiveInteger",value:function(e){return null===e||""===e?null:this.isPositiveInteger(e)?"success":"error"}},{key:"handleCurrencySelect",value:function(e,t){this.setState({currency:T[e]})}},{key:"handleClearClick",value:function(){this.setState({principal:"",loanTerm:"",loanRate:"",currency:T[1],isLoading:!1,apiEndpointEditMode:!1,apiEndpoint:"",tableData:[]})}},{key:"isPositiveInteger",value:function(e){return!(isNaN(e)||Number(e)<=0)}},{key:"canBeSubmitted",value:function(){var e=this.state,t=e.principal,a=e.loanTerm,n=e.apiEndpoint;return this.isPositiveInteger(t)&&this.isPositiveInteger(a)&&n&&n.length>0}},{key:"calculate",value:function(){var e=this,t={p:this.state.principal,t:this.state.loanTerm,r:this.state.loanRate};this.setState({isLoading:!0}),this.makeRequest(t).then(function(t){console.log("Result fetched"),console.log(e.state),e.setState({tableData:t.amortList}),e.setState({isLoading:!1})}).catch(this.setState({isLoading:!1}))}},{key:"makeRequest",value:function(){var e=Object(s.a)(c.a.mark(function e(t){var a,n,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object.keys(t).map(function(e){return e+"="+t[e]}).join("&"),n=this.state.apiEndpoint+"?"+a,console.log("Executing async/await based request"),console.log(n),e.next=6,fetch(n);case 6:return l=e.sent,e.next=9,l.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"renderTable",value:function(e){var t=[];Object.keys(e[0]).forEach(function(e){return t.push(l.a.createElement("th",{key:e},e))});var a=[],n=Object.keys(e[0]),i=0;return e.map(function(e){i++;var t=n.map(function(t){return l.a.createElement("td",{key:t+i}," ",e[t]," ")});return a.push(l.a.createElement("tr",{key:i},t))}),l.a.createElement("div",null,l.a.createElement(L.a,{striped:!0,bordered:!0},l.a.createElement("thead",null,l.a.createElement("tr",null,t)),l.a.createElement("tbody",null,a)))}},{key:"render",value:function(){var e=this;console.log("rendering...");var t=this.state.tableData,a=this.state.isLoading;return l.a.createElement(O.a,null,l.a.createElement(w.a,null,l.a.createElement(I.a,{sm:12,md:4},l.a.createElement("div",null,l.a.createElement(g.a,{controlId:"formApiEndpoint"},l.a.createElement(b.a,null,"API Endpoint"),l.a.createElement(y.a,null,l.a.createElement(f.a,{type:"text",readOnly:!this.state.apiEndpointEditMode,name:"apiEndpoint",value:this.state.apiEndpoint,onChange:this.handleStateChange}),l.a.createElement(y.a.Button,null,l.a.createElement(S.a,{"aria-label":"Edit",onClick:this.handleApiEndpointEdit},l.a.createElement(j.a,{glyph:this.state.apiEndpointEditMode?"glyphicon glyphicon-ok":"glyphicon glyphicon-pencil"}))))),l.a.createElement(g.a,{controlId:"formPrincipal",validationState:this.validatePrincipal(this.state.principal)},l.a.createElement(b.a,null,"Loan Amount"),l.a.createElement(y.a,null,l.a.createElement(f.a,{type:"text",placeholder:"Enter principal",name:"principal",value:this.state.principal,onChange:this.handleStateChange}),l.a.createElement(k.a,{componentClass:y.a.Button,id:"dropdown-addon-currency",title:this.state.currency,onSelect:this.handleCurrencySelect.bind(this)},T.map(function(t,a){return l.a.createElement(C.a,{key:a,eventKey:a,active:e.state.currency===t},t)})))),l.a.createElement(g.a,{controlId:"formLoanTerm",validationState:this.validateLoanTerm(this.state.loanTerm)},l.a.createElement(b.a,null,"Term"),l.a.createElement(y.a,null,l.a.createElement(f.a,{type:"text",name:"loanTerm",value:this.state.loanTerm,placeholder:"Enter loan term",onChange:this.handleStateChange}),l.a.createElement(y.a.Addon,null,"months"))),l.a.createElement(g.a,{controlId:"formLoanRate",validationState:this.validateLoanRate(this.state.loanRate)},l.a.createElement(b.a,null,"Annual Percentage Rate"),l.a.createElement(y.a,null,l.a.createElement(f.a,{type:"text",name:"loanRate",value:this.state.loanRate,placeholder:"Enter rate",onChange:this.handleStateChange}),l.a.createElement(y.a.Addon,null,"%")))))),l.a.createElement("div",{className:"with-bottom-margin-10"},l.a.createElement(w.a,null,l.a.createElement(I.a,{sm:6,md:2},l.a.createElement(S.a,{disabled:!this.canBeSubmitted()||a,type:"submit",onClick:a?null:this.calculate,block:!0},a?"Calculating...":"Calculate")),l.a.createElement(I.a,{sm:6,md:2},l.a.createElement(S.a,{block:!0,type:"reset",onClick:this.handleClearClick},"Clear")))),l.a.createElement("div",{className:"with-bottom-margin-10"},l.a.createElement(w.a,null,l.a.createElement(I.a,{sm:12,md:4},l.a.createElement(S.a,{block:!0,disabled:!0},"Amortization Table")))),l.a.createElement(w.a,null,l.a.createElement("div",null,t&&t.length>0&&this.renderTable(t))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[122,2,1]]]);
//# sourceMappingURL=main.933ae3c6.chunk.js.map